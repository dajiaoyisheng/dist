webpackJsonp([3],{"0Tre":function(t,e){t.exports="data:image/gif;base64,R0lGODlhBQAsALMAAFNzmsfa8pOYm7vQ66/G4qS926C41sfa8////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAAAALAAAAAAFACwAAAQzUEgZBinmWKxv3p/XceAYkmKppizKISKCvHImy8cN5AhgAxxA60Q0GVeuIlI5PDZBE0kEADs="},"4Vfc":function(t,e){},QcOD:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMmQ4MzQzOS1kMzMyLTRkZmMtYTA0MC1hNWMwZDhkMjFkNWQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkRGMEM3MzI5RjY4MTFFODg3NTQ5RDcyMTZENTI3MUMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkRGMEM3MzE5RjY4MTFFODg3NTQ5RDcyMTZENTI3MUMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowYWVhM2RhMy00NzMyLTQxZmQtOTkzYy0wYjJjYjQzNmFkZWQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjJkODM0MzktZDMzMi00ZGZjLWEwNDAtYTVjMGQ4ZDIxZDVkIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UueUGAAAAN5JREFUeNpi+v//PwNOrKl5BZ88EwMy0NK6AcTSSCLaSHLSQHwJWTmqZgaGq0Dch8S/jMTuB+JbyIpZ0DQXAvEeOO/aNT00V7ghK2YEuR0DaGlJAskEIFYA4odAPB9o0HN0ZYzAQHkEpN8A8WqggnagRi0g+zAQCyGpewfEtkD5a0D5DiDbF4i5QX6eBsT/gDgTqrALTSMDlN8FZQcD8V8gXobpbC2tz0CSB9MvDF+ANvPiC20GHBqxijMxUAAGTjP2eCYSsCCF8gkgaU6EngvAUDdEdzaxTvgLYwAEGABTPl/zweKZkQAAAABJRU5ErkJggg=="},gHZ6:function(t,e){},hqB5:function(t,e){},mGbH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),o=a("0Tre"),s=a.n(o),l=a("oXX7"),r=a.n(l),c=a("wa1j"),p=a.n(c),m=a("QcOD"),d=a.n(m),u={data:function(){return{tempRow:null,current:null,tempRemark:"",totalCount:0,pointDate:"",pointTime:"",topTableData:[],bottomTableData:[],activeNames:["topItem"]}},methods:{initQuery:function(t,e,a){var i=this,n={nodeId:t,pointDate:e,pointTime:a};this.$post(this.urlconfig.pnGetPnHis,n).then(function(t){0===t.status&&(i.tempRow=null,i.current=null,i.pointDate=t.data.pointDate,i.pointTime=t.data.pointTime,i.topTableData=t.data.unidentified,i.bottomTableData=t.data.identified,i.totalCount=i.topTableData.length+i.bottomTableData.length)}).catch(function(t){}).then(function(){})},pointNameNow:function(t){var e=this,a={parameter:n()(t)};this.$post(this.urlconfig.pnPointNameNow,a).then(function(t){0===t.status&&(e.pointDate=t.data.pointDate,e.pointTime=t.data.pointTime,e.topTableData=t.data.unidentified,e.bottomTableData=t.data.identified,e.totalCount=e.topTableData.length+e.bottomTableData.length)}).catch(function(t){}).then(function(){})},changePnRemark:function(t,e){this.tempRow=e,this.current=t,this.tempRemark=e.pnRemark},changePnRemarkBlur:function(){var t=this;this.tempRow.pnRemark!==this.tempRemark&&""!=this.tempRemark?this.$confirm("备注信息已修改，是否保存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={pnID:t.tempRow.pnID,pnRemark:t.tempRemark};t.$post(t.urlconfig.pnSavePointName,e).then(function(e){0===e.status&&(t.tempRow.pnRemark=t.tempRemark,t.tempRow=null,t.current=null)}).catch(function(t){}).then(function(){})}).catch(function(t){}):(this.tempRow=null,this.current=null)}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"pointNameHis"}},[a("el-row",{staticStyle:{"text-align":"center"}},[t._v("\n        "+t._s(t.pointDate)+" "+t._s(t.pointTime)+"点名情况\n    ")]),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","padding-left":"15px","font-size":"14px"}},[t._v("\n        本次点名应到"+t._s(t.totalCount)+"人，已到"+t._s(t.bottomTableData.length)+"人，未到"+t._s(t.topTableData.length)+"人，详细信息如下：\n    ")]),t._v(" "),a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{staticClass:"topItem",attrs:{name:"topItem",title:"未识别人员列表"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.topTableData,stripe:"",height:"255"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"编号",prop:"criCode",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"criName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("未到")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"pnRemark"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){t.changePnRemark(e.$index+"top",e.row)}}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.current===e.$index+"top",expression:"current === scope.$index + 'top'"}],attrs:{size:"small"},on:{blur:t.changePnRemarkBlur},model:{value:t.tempRemark,callback:function(e){t.tempRemark=e},expression:"tempRemark"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.current!==e.$index+"top",expression:"current !== scope.$index + 'top'"}]},[t._v(t._s(e.row.pnRemark))])],1)]}}])})],1)],1),t._v(" "),a("el-collapse-item",{staticClass:"bottomItem",attrs:{title:"已识别人员列表",name:"bottomItem"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bottomTableData,stripe:"",height:"320"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"编号",prop:"criCode",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"姓名",prop:"criName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("已到")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"pnRemark"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:function(a){t.changePnRemark(e.$index+"bottom",e.row)}}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.current===e.$index+"bottom",expression:"current === scope.$index + 'bottom'"}],attrs:{size:"small"},on:{blur:t.changePnRemarkBlur},model:{value:t.tempRemark,callback:function(e){t.tempRemark=e},expression:"tempRemark"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.current!==e.$index+"bottom",expression:"current !== scope.$index + 'bottom'"}]},[t._v(t._s(e.row.pnRemark))])],1)]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var A={data:function(){return{pnAside:!0,showDialog:!1,pnMainAside:!1,activeName:"actPnTab",pnMainAsideLeft:250,images:{left:s.a,right:r.a,video:p.a,warning:d.a},bottomPagination:{pageSize:10,currentPage:1,totalRows:100},parameter:{pointDate:new Date,pointTime:"",keyword:"",nodeType:"",nodeId:""},treeData:[],topTableData:[],bottomTableData:[],cameras:[],pointTimes:[],timmer:null}},methods:{changeTabs:function(t,e){"actPnTab"==this.activeName?this.initSetInterval():"hisPnTab"==this.activeName&&(this.pnAside=!0,this.pnMainAside=!1,this.pnMainAsideLeft=250,this.parameter.pointTime="",this.parameter.pointDate=new Date,this.queryPointNameTimes(),this.clearSetInterval())},getPrisonareatree:function(){var t=this;this.$get(this.urlconfig.pnGetPrisonareatree).then(function(e){0===e.status&&(t.treeData=e.data)}).catch(function(t){}).then(function(){})},getTabledatas:function(){var t=this,e={parameter:n()(this.parameter)};this.$post(this.urlconfig.pnGetTabledatas,e).then(function(e){0===e.status&&(t.topTableData=e.data.unidentified,t.bottomTableData=e.data.identified)}).catch(function(t){}).then(function(){})},handleNodeClick:function(t){this.parameter.nodeType=t.nodeType,this.parameter.nodeId=t.id,this.activeName="actPnTab",this.getTabledatas(),null==this.timmer&&this.initSetInterval()},doQuery:function(){this.getTabledatas()},showVideo:function(t,e,a){this.pnAside=!1,this.pnMainAsideLeft=7,this.pnMainAside=!0,this.cameras=a.cameras},closeVideo:function(){this.pnAside=!0,this.pnMainAsideLeft=250,this.pnMainAside=!1},initSetInterval:function(){var t=this;this.timmer=setInterval(function(){t.getTabledatas()},5e3)},clearSetInterval:function(){null!=this.timmer&&(clearInterval(this.timmer),this.timmer=null)},queryPointNameTimes:function(){var t=this,e={nodeId:this.parameter.nodeId,pointDate:this.parameter.pointDate};this.$post(this.urlconfig.pnGetPnTimes,e).then(function(e){0===e.status&&(null!=e.data&&e.data.length>0?t.parameter.pointTime=e.data[0].pnTime:t.parameter.pointTime="",t.pointTimes=e.data,t.queryPointNameHis())}).catch(function(t){}).then(function(){})},queryPointNameHis:function(){var t=this;this.$nextTick(function(){var e=t.parameter.nodeId,a=t.parameter.pointDate,i=t.parameter.pointTime;t.$refs.pointNameHisTab.initQuery(e,a,i)})},pointNameNow:function(){var t=this;this.showDialog=!0,this.$nextTick(function(){t.$refs.pointNameHisNow.pointNameNow(t.parameter)})},beforeClose:function(t){t(),this.showDialog=!1}},mounted:function(){this.getPrisonareatree(),this.getTabledatas(),this.initSetInterval()},beforeDestroy:function(){this.clearSetInterval()},components:{pointNameHis:a("VU/8")(u,h,!1,function(t){a("4Vfc"),a("n6wx")},"data-v-3f6fbf68",null).exports,tablePagination:a("zeeE").a}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"pointname"}},[t.pnAside?a("section",{staticClass:"pn-left"},[a("el-tree",{attrs:{data:t.treeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node"},[0==n.isWarning?a("span",[a("i",{class:i.icon}),t._v(t._s(i.label))]):t._e(),t._v(" "),1==n.isWarning?a("span",[a("i",[a("img",{attrs:{src:t.images.warning}})]),t._v(t._s(i.label))]):t._e()])}}])})],1):t._e(),t._v(" "),a("section",{staticClass:"pn-right",class:{"pn-right-show":!t.pnAside,"pn-right-hidden":t.pnAside}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.changeTabs},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"实时点名",name:"actPnTab"}},[a("section",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("服刑人员:")]),t._v(" "),a("el-input",{staticClass:"pn-right-header-input",attrs:{size:"small",placeholder:"请输入服刑人员姓名或编号",clearable:""},model:{value:t.parameter.keyword,callback:function(e){t.$set(t.parameter,"keyword",e)},expression:"parameter.keyword"}}),t._v(" "),a("el-button",{staticClass:"search-btn",attrs:{size:"mini"},on:{click:function(e){t.doQuery()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"search-btn",attrs:{size:"mini"},on:{click:function(e){t.pointNameNow()}}},[t._v("立即点名")])],1),t._v(" "),a("section",[a("el-dialog",{attrs:{title:"人员点名",visible:t.showDialog,width:"1000px","before-close":t.beforeClose},on:{"update:visible":function(e){t.showDialog=e}}},[a("pointNameHis",{ref:"pointNameHisNow"})],1)],1),t._v(" "),a("section",{style:{left:t.pnMainAsideLeft+"px"}},[a("el-container",[a("el-main",{staticClass:"pn-right-main-main"},[a("section",{staticClass:"pn-right-main-main-top"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"pn-card-label",attrs:{slot:"header"},slot:"header"},[t._v("未识别人员列表("),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.topTableData.length)+"人")]),t._v(")")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.topTableData,stripe:"",height:"240"}},[a("el-table-column",{attrs:{prop:"criCode",label:"编号","min-width":"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"criName",label:"姓名","min-width":"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"warningType",label:"预警事件类型","min-width":"120px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"paiCode",label:"最后一次被定位区域","min-width":"230px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpcLoctime",label:"最后一次被定位时间","min-width":"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"timeLength",label:"距当前时间","min-width":"200px"}})],1)],1)],1),t._v(" "),a("section",{staticClass:"pn-main-main-bottom"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"pn-card-label",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("已识别人员列表("+t._s(t.bottomTableData.length)+"人)")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bottomTableData,stripe:"",height:"365"}},[a("el-table-column",{attrs:{prop:"criCode",label:"编号","min-width":"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"criName",label:"姓名","min-width":"100px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"paiCode",label:"当前区域","min-width":"230px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpcLoctime",label:"识别时间","min-width":"200px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cpoLoctype",label:"识别方法","min-width":"100px"}}),t._v(" "),a("el-table-column",{attrs:{label:"视频",width:"100px",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"btn",attrs:{type:"text"},on:{click:function(a){t.showVideo("bottomTableData",e.$index,e.row)}}},[a("img",{staticStyle:{display:"inline-block","line-height":"20px","vertical-align":"middle"},attrs:{src:t.images.video}}),t._v(" "),a("span",{staticStyle:{display:"inline-block","line-height":"20px","vertical-align":"middle"}},[t._v("查看")])])]}}])})],1)],1)],1)]),t._v(" "),t.pnMainAside?a("el-aside",{staticClass:"pn-right-main-aside",staticStyle:{width:"800px"}},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"pn-card-label"},[t._v("监控视频")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.closeVideo()}}},[t._v("关闭")])],1),t._v(" "),a("div",t._l(t.cameras,function(t){return a("iframe",{key:t,staticStyle:{height:"370px",width:"750px"},attrs:{src:"../ws_rtsp/rtspPlay.jsp?id="+t}})}))])],1):t._e()],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"历史点名",name:"hisPnTab"}},[a("section",[a("span",{staticStyle:{"font-size":"14px"}},[t._v("点名日期:")]),t._v(" "),a("el-date-picker",{attrs:{size:"mini",placeholder:"选择日期",type:"date"},on:{change:t.queryPointNameTimes},model:{value:t.parameter.pointDate,callback:function(e){t.$set(t.parameter,"pointDate",e)},expression:"parameter.pointDate"}}),t._v(" "),a("span",{staticStyle:{"font-size":"14px"}},[t._v("点名时间:")]),t._v(" "),a("el-select",{attrs:{size:"mini"},model:{value:t.parameter.pointTime,callback:function(e){t.$set(t.parameter,"pointTime",e)},expression:"parameter.pointTime"}},t._l(t.pointTimes,function(e,i){return a("el-option",{key:i,attrs:{value:e.pnTime}},[t._v(t._s(e.pnTime)+"(第"+t._s(t.pointTimes.length-i)+"次)")])})),t._v(" "),a("el-button",{staticClass:"search-btn",attrs:{size:"mini"},on:{click:function(e){t.queryPointNameHis()}}},[t._v("查询")])],1),t._v(" "),a("section",{style:{left:t.pnMainAsideLeft+"px"}},[a("pointNameHis",{ref:"pointNameHisTab"})],1)])],1)],1)])},staticRenderFns:[]};var v=a("VU/8")(A,b,!1,function(t){a("gHZ6"),a("hqB5")},"data-v-24d6fa18",null);e.default=v.exports},n6wx:function(t,e){},oXX7:function(t,e){t.exports="data:image/gif;base64,R0lGODlhBQAsALMAAFNzmsfa8pOYm7vQ66/G4qS926C41sfa8////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAAAALAAAAAAFACwAAAQzUEgZBinmWKxv3p/XceAYkmKppizKISKCvHImy8cN5AhgAxxA60Q0GVeuIlI5PDZBE0kEADs="},wa1j:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABwUlEQVQ4T6WTvYsTQRjGn2cCkjVgp1gGO0HkrMVG8U8wIoLFFXJHJKiwM/H8YBQ07KwE9cSrBatUZ6Nwop12ovgPbEqv0EIlCybuK3PsLJcj8USn2pl939/79bzEfx7O8rfW7omiaEEpdUxElIi8z/P8o7X25077KYCIME1TKyJXAYxJfiodDovIXgAPtdY3SUoAVQDv7Jx7AmCR5P16vZ50Op1v3rDf70fj8fgyyesAnsVxvBwgFcA51wVwjeSJOI5D5KmMe73eIaXUOwCrxpi7/ucWYDAY1LIs2yR5W2u96t+cc8dJft8Jc86dFZG1PM8P+p5sAZIkOQXgRRRF+0PazrmnAM4DeNxoNG602+0fIdhwOPwK4IzWeiMALgFYMsYcCTmXgAvl/XNRFIvdbvdlGfANgHVjzKPtgIvGmKPzACKybIxZL8t7LSLPK0CapidFZGM0Gu2z1o5Ko7klZFn2xZdgjHk11UQAdzy1TPO0UmpzRhPP+b40m80DrVbrVzXGJEkMyZXdxlir1d76MWqt71Vj9B+7CWkymVwBsDJXSAHyJymTfBDH8a2ZUt4uubBMJBdIsiiKD3+1TP+y2b8BwGnyEWNMwNUAAAAASUVORK5CYII="}});
//# sourceMappingURL=3.f5a9361c010985f89a80.js.map